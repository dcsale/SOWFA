#!/bin/bash
<<<<<<< HEAD
cd src/openfast/bin
make 2>&1 | tee compile-openfast.log
./libmake 2>&1 | tee compile-openfast-link.log
cd ../../../

cd src/fastturb
wmake libso 2>&1 | tee compile-fastturb.log
cd ../../

cd src/finiteVolume
wmake libso 2>&1 | tee compile-finiteVolume.log
cd ../../

cd src/turbulenceModels/incompressible/LES/
wmake libso 2>&1 | tee compile-LES.log
=======

echo "Building with OpenFOAM-"$OPENFOAM_VERSION

version=${WM_PROJECT_VERSION:0:1}
variant=${WM_PROJECT_VERSION:2:1}

dir=2.0-and-lower
if [ $version -lt 2 ]
then
   dir=2.0-and-lower
elif [ $version -eq 2 ] && [ $variant -le 0 ]
then
   dir=2.0-and-lower
elif [ $version -eq 2 ] && [ $variant -ge 1 ] && [ $variant -le 2 ]
then
   dir=2.1-2.2
elif [ $version -eq 2 ] && [ $variant -ge 3 ]
then
   dir=2.3-and-higher
fi



cd src/turbulenceModels/incompressible/LES/
cd GenEddyViscABL
rm GenEddyViscABL.H
rm GenEddyViscABL.C
ln -s $dir/GenEddyViscABL.H ./
ln -s $dir/GenEddyViscABL.C ./
cd ../
wmake libso
>>>>>>> a7154af0e483944c28f61abc3d6de5d1c922d3a2
cd ../../../../

cd src/turbineModels
wmake libso 2>&1 | tee compile-turbineModels.log
cd ../../

<<<<<<< HEAD
cd applications/utilities/setFieldsABL
wmake 2>&1 | tee compile-setFieldsABL.log
cd ../../../

cd applications/utilities/setFieldsABL2
wmake 2>&1 | tee compile-setFieldsABL2.log
cd ../../../

# # cd applications/solvers/incompressible/windEnergy/ABLSolver
# # wmake 2>&1 | tee compile-ABLSolver.log
# # cd ../../../../../

cd applications/solvers/incompressible/windEnergy/ABLSolver-2.1-and-higher
wmake 2>&1 | tee compile-ABLSolver.log
cd ../../../../../

# # cd applications/solvers/incompressible/windEnergy/ABLTerrainSolver
# # wmake 2>&1 | tee compile-ABLTerrainSolver.log
# # cd ../../../../../

cd applications/solvers/incompressible/windEnergy/ABLTerrainSolver-2.1-and-higher
wmake 2>&1 | tee compile-ABLTerrainSolver.log
cd ../../../../../

# # cd applications/solvers/incompressible/windEnergy/windPlantSolver
# # wmake 2>&1 | tee compile-windPlantSolver.log
# # cd ../../../../../

cd applications/solvers/incompressible/windEnergy/windPlantSolver-2.1-and-higher
wmake 2>&1 | tee compile-windPlantSolver.log
cd ../../../../../

# # cd applications/solvers/incompressible/windEnergy/windPlantSolverFAST
# # wmake 2>&1 | tee compile-windPlantSolverFAST.log
# # cd ../../../../../

cd applications/solvers/incompressible/windEnergy/windPlantSolverFAST-2.1-and-higher
wmake 2>&1 | tee compile-windPlantSolverFAST.log
cd ../../../../../

cd applications/solvers/incompressible/windEnergy/pisoFoamTurbine
wmake 2>&1 | tee compile-pisoFoamTurbine.log
cd ../../../../../

cd applications/solvers/incompressible/windEnergy/pisoFoamTurbine.towerNacelle
wmake 2>&1 | tee compile-pisoFoamTurbine.towerNacelle.log
cd ../../../../../

cd applications/solvers/incompressible/windEnergy/turbineTestHarness
wmake 2>&1 | tee compile-turbineTestHarness.log
=======
cd src/finiteVolume
wmake libso
cd ../../

cd applications/utilities/setFieldsABL
wmake
cd ../../../

cd applications/solvers/incompressible/windEnergy/ABLSolver
rm pEqn.H
rm ABLSolver.C
ln -s $dir/pEqn.H ./
ln -s $dir/ABLSolver.C ./
wmake
cd ../../../../../

cd applications/solvers/incompressible/windEnergy/ABLTerrainSolver
rm pEqn.H
rm ABLTerrainSolver.C
ln -s $dir/pEqn.H ./
ln -s $dir/ABLTerrainSolver.C ./
wmake
cd ../../../../../

<<<<<<< HEAD
cd applications/solvers/incompressible/windEnergy/windPlantSolver
rm pEqn.H
rm windPlantSolver.C
ln -s $dir/pEqn.H ./
ln -s $dir/windPlantSolver.C ./
wmake
cd ../../../../../

cd applications/solvers/incompressible/windEnergy/pisoFoamTurbine
rm pisoFoamTurbine.C
ln -s $dir/pisoFoamTurbine.C
wmake
cd ../../../../../

cd applications/solvers/incompressible/windEnergy/pisoFoamTurbine.ADM
rm pisoFoamTurbine.C
ln -s $dir/pisoFoamTurbine.C
wmake
cd ../../../../../

cd applications/solvers/incompressible/windEnergy/turbineTestHarness
wmake
cd ../../../../../

cd src/openfast/bin
make
./libmake
cd ../../../

cd src/fastturb
wmake libso
cd ../../

cd applications/solvers/incompressible/windEnergy/windPlantSolverFAST
wmake
>>>>>>> a7154af0e483944c28f61abc3d6de5d1c922d3a2
cd ../../../../../
=======
# cd applications/solvers/incompressible/windEnergy/windPlantSolver
# rm pEqn.H
# rm windPlantSolver.C
# ln -s $dir/pEqn.H ./
# ln -s $dir/windPlantSolver.C ./
# wmake
# cd ../../../../../
# 
# cd applications/solvers/incompressible/windEnergy/pisoFoamTurbine
# rm pisoFoamTurbine.C
# ln -s $dir/pisoFoamTurbine.C
# wmake
# cd ../../../../../
# 
# cd applications/solvers/incompressible/windEnergy/pisoFoamTurbine.ADM
# rm pisoFoamTurbine.C
# ln -s $dir/pisoFoamTurbine.C
# wmake
# cd ../../../../../
# 
# cd applications/solvers/incompressible/windEnergy/turbineTestHarness
# wmake
# cd ../../../../../
# 
# cd src/openfast/bin
# make
# ./libmake
# cd ../../../
# 
# cd src/fastturb
# wmake libso
# cd ../../
# 
# cd applications/solvers/incompressible/windEnergy/windPlantSolverFAST
# wmake
# cd ../../../../../
>>>>>>> 129c72504a9f70b2394430c15b7e6ace52d6c806
